<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="light" />
  <title>Ruken & Samet | Ni≈üan Anƒ±larƒ±</title>

  <style>
    :root{
      --ink:#0d1b15;
      --muted: rgba(13,27,21,.72);

      --brand-950:#071b14;
      --brand-900:#0f2f24;
      --brand-600:#2a5c47;
      --gold:#cbb57e;

      --card: rgba(255,255,255,.92);
      --stroke: rgba(15,47,36,.14);
      --shadow: 0 22px 70px rgba(10,28,21,.16);

      --radius-xl: 28px;
      --radius-lg: 18px;

      --ok:#167a3a;
      --err:#c62828;

      /* ‚úÖ cache kƒ±r */
      --floral: url("assets/floral-bg.png?v=700");
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--ink);
      min-height: 100dvh;

      padding:
        max(18px, env(safe-area-inset-top))
        14px
        max(22px, env(safe-area-inset-bottom));

      display:grid;
      place-items:center;
      overflow-x:hidden;

      background: #eaf4ee;
    }

    /* ‚úÖ PREMIUM BACKGROUND: 4 k√∂≈üe + paper + soft gradients (no stretch) */
    .bg{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      min-height:100dvh;

      /* Katman sƒ±rasƒ±: en √ºstte k√∂≈üeler, sonra paper, sonra gradient */
      background-image:
        /* K√∂≈üeler (aynƒ± g√∂rsel, farklƒ± anchor) */
        var(--floral),
        var(--floral),
        var(--floral),
        var(--floral),

        /* Paper hissi */
        radial-gradient(1200px 700px at 50% 20%, rgba(255,255,255,.85), transparent 68%),
        radial-gradient(1200px 700px at 50% 90%, rgba(255,255,255,.72), transparent 68%),

        /* Palet */
        radial-gradient(1100px 760px at 18% 18%, rgba(66,153,122,.18), transparent 62%),
        radial-gradient(1100px 760px at 82% 86%, rgba(215,167,179,.12), transparent 62%),
        radial-gradient(900px 520px at 50% 12%, rgba(203,181,126,.10), transparent 70%),
        linear-gradient(135deg, rgba(240,249,245,.98), rgba(220,241,231,.96));

      background-repeat:
        no-repeat,
        no-repeat,
        no-repeat,
        no-repeat,

        no-repeat,
        no-repeat,

        no-repeat,
        no-repeat,
        no-repeat,
        no-repeat;

      /* K√∂≈üelere sabitle */
      background-position:
        left top,
        right top,
        left bottom,
        right bottom,

        center top,
        center bottom,

        18% 18%,
        82% 86%,
        50% 12%,
        center;

      /* ‚úÖ K√∂≈üe g√∂rselleri: cihazdan baƒüƒ±msƒ±z ‚Äúmaksimum boyut‚Äù */
      background-size:
        720px auto,  /* left top */
        720px auto,  /* right top */
        720px auto,  /* left bottom */
        720px auto,  /* right bottom */

        100% 100%,
        100% 100%,

        100% 100%,
        100% 100%,
        100% 100%,
        100% 100%;
    }

    /* Telefonlarda k√∂≈üe boyutu k√º√ß√ºls√ºn */
    @media (max-width: 560px){
      .bg{
        background-size:
          520px auto,
          520px auto,
          520px auto,
          520px auto,

          100% 100%,
          100% 100%,

          100% 100%,
          100% 100%,
          100% 100%,
          100% 100%;
      }
    }

    /* √áok k√º√ß√ºk telefonlarda daha da k√º√ß√ºlt */
    @media (max-width: 380px){
      .bg{
        background-size:
          460px auto,
          460px auto,
          460px auto,
          460px auto,

          100% 100%,
          100% 100%,

          100% 100%,
          100% 100%,
          100% 100%,
          100% 100%;
      }
    }

    /* B√ºy√ºk ekran: k√∂≈üeler daha b√ºy√ºk */
    @media (min-width: 1200px){
      .bg{
        background-size:
          860px auto,
          860px auto,
          860px auto,
          860px auto,

          100% 100%,
          100% 100%,

          100% 100%,
          100% 100%,
          100% 100%,
          100% 100%;
      }
    }

    .wrap{
      width:min(860px, 100%);
      position:relative;
      z-index:1;
    }

    .card{
      border-radius: var(--radius-xl);
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .header{
      padding: 18px 18px 16px;
      background: linear-gradient(135deg, var(--brand-950), var(--brand-600));
      color:#fff;
      position:relative;
    }
    .header::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(560px 280px at 18% 22%, rgba(255,255,255,.16), transparent 62%),
        radial-gradient(560px 280px at 90% 88%, rgba(255,255,255,.12), transparent 60%);
      opacity:.55;
      pointer-events:none;
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      position:relative;
      z-index:1;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      white-space:nowrap;
    }

    .date{ font-size:12px; opacity:.92; white-space:nowrap; }

    .title{
      margin: 12px 0 4px;
      font-size: 34px;
      letter-spacing:.2px;
      position:relative; z-index:1;
    }

    .subtitle{
      margin:0;
      font-size: 14px;
      opacity:.95;
      line-height:1.45;
      position:relative; z-index:1;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }

    .accent-line{
      height:2px;
      width:120px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      border-radius:999px;
      opacity:.95;
      margin-top:10px;
      position:relative; z-index:1;
    }

    .content{
      padding: 16px 18px 18px;
      background: rgba(255,255,255,.92);
    }

    .dropzone{
      display:block;
      width:100%;
      border-radius: var(--radius-lg);
      border: 1.5px dashed rgba(15,47,36,.42);
      background: rgba(255,255,255,.96);
      padding: 16px;
      cursor:pointer;
      user-select:none;
      transition: transform .16s ease, border-color .16s ease;
      outline:none;
    }
    .dropzone:hover{
      transform: translateY(-1px);
      border-color: rgba(15,47,36,.65);
    }
    .dropzone.dragover{
      background: rgba(231, 246, 239, .96);
      border-color: rgba(15,47,36,.90);
      transform: translateY(-1px);
    }

    .dz-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .dz-title{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
      color: var(--brand-900);
      font-size: 15px;
    }
    .pill{
      font-size: 12px;
      color: rgba(13,27,21,.72);
      background: rgba(15,47,36,.06);
      border: 1px solid rgba(15,47,36,.10);
      padding: 6px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }
    .dz-hint{
      margin:0;
      color: rgba(13,27,21,.70);
      font-size: 13px;
      line-height:1.45;
    }
    input[type=file]{ display:none; }

    .status{
      margin-top: 10px;
      font-size: 13px;
      min-height: 18px;
      line-height:1.35;
      color: var(--muted);
    }

    .footer{
      padding: 12px 16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      border-top: 1px solid rgba(15,47,36,.10);
      background: rgba(255,255,255,.92);
      font-size: 12px;
      color: rgba(13,27,21,.76);
    }
    .footer b{ color: var(--brand-900); font-weight: 900; }

    @media (max-width:560px){
      .title{ font-size: 28px; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card">
      <header class="header">
        <div class="row">
          <div class="chip">üíç Ni≈üan Anƒ± Kutusu ‚Ä¢ Fotoƒüraf & Video</div>
          <div class="date" id="dateLabel"></div>
        </div>
        <h1 class="title">Ruken & Samet</h1>
        <p class="subtitle">Anƒ±larƒ±nƒ±zƒ± bizimle payla≈üƒ±n üåø</p>
        <div class="accent-line"></div>
      </header>

      <div class="content">
        <label class="dropzone" id="dropzone" for="fileInput">
          <div class="dz-top">
            <div class="dz-title">üì∏ Fotoƒüraf / üé• Video se√ßin</div>
            <div class="pill">Maks: 25 dosya ‚Ä¢ Toplam: 250 MB</div>
          </div>
          <p class="dz-hint">Tƒ±klayƒ±n ‚Üí galeriden se√ßin ‚Üí otomatik y√ºklensin.</p>
          <input id="fileInput" type="file" multiple accept="image/*,video/*" />
        </label>

        <div class="status" id="status"></div>
      </div>

      <footer class="footer">
        <div>üìå Y√ºkleme bitene kadar sayfayƒ± kapatmayƒ±n.</div>
        <div><b>Ruken</b> & <b>Samet</b> ‚Ä¢ Te≈üekk√ºrler ü§ç</div>
      </footer>
    </section>
  </main>

<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwIgq1XMRIH4l0nubP-5HRUl9Znq2MzimEGLlRGzoiKJnSjXe3UYs9KYUlI3XdlL2kw/exec";
  const MAX_FILES = 25;
  const MAX_TOTAL_MB = 250;

  const el = (id)=>document.getElementById(id);
  const fileInput = el("fileInput");
  const dropzone  = el("dropzone");
  const statusEl  = el("status");
  let busy = false;

  (function setDate(){
    const d = new Date();
    const months = ["Ocak","≈ûubat","Mart","Nisan","Mayƒ±s","Haziran","Temmuz","Aƒüustos","Eyl√ºl","Ekim","Kasƒ±m","Aralƒ±k"];
    el("dateLabel").textContent = `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
  })();

  const sumBytes = (list)=> list.reduce((a,f)=>a+f.size,0);
  const isAllowed = (f)=> f.type?.startsWith("image/") || f.type?.startsWith("video/");

  function setStatus(msg, type="default"){
    statusEl.textContent = msg || "";
    statusEl.style.color = (type==="err") ? "var(--err)" : "rgba(13,27,21,.72)";
  }

  function validate(files){
    if(files.length===0) return {ok:false, msg:"Dosya se√ßilmedi."};
    if(files.length>MAX_FILES) return {ok:false, msg:`En fazla ${MAX_FILES} dosya se√ßebilirsiniz.`};
    const totalMB = sumBytes(files)/(1024*1024);
    if(totalMB>MAX_TOTAL_MB) return {ok:false, msg:`Toplam ${MAX_TOTAL_MB} MB sƒ±nƒ±rƒ± a≈üƒ±ldƒ±.`};
    return {ok:true};
  }

  fileInput.addEventListener("change", async (e)=>{
    if(busy) return;
    const picked = [...e.target.files].filter(isAllowed);
    const v = validate(picked);
    if(!v.ok){ setStatus(v.msg,"err"); fileInput.value=""; return; }
    await startUpload(picked);
    fileInput.value="";
  });

  ["dragenter","dragover"].forEach(ev=>{
    dropzone.addEventListener(ev,(e)=>{
      e.preventDefault(); e.stopPropagation();
      dropzone.classList.add("dragover");
    });
  });
  ["dragleave","drop"].forEach(ev=>{
    dropzone.addEventListener(ev,(e)=>{
      e.preventDefault(); e.stopPropagation();
      dropzone.classList.remove("dragover");
    });
  });
  dropzone.addEventListener("drop", async (e)=>{
    if(busy) return;
    const dropped = [...e.dataTransfer.files].filter(isAllowed);
    const v = validate(dropped);
    if(!v.ok){ setStatus(v.msg,"err"); return; }
    await startUpload(dropped);
  });

  async function startUpload(files){
    busy = true;
    setStatus("");
    try{
      for(const f of files) await uploadFile(f);
    }catch(err){
      setStatus("HATA: " + String(err), "err");
    }finally{
      busy = false;
    }
  }

  function uploadFile(file){
    return new Promise((resolve,reject)=>{
      const reader = new FileReader();
      reader.onload = async ()=>{
        try{
          const base64 = String(reader.result).split(",")[1];
          const res = await fetch(API_URL,{
            method:"POST",
            body: new URLSearchParams({
              file: base64,
              originalName: file.name,
              type: file.type || "application/octet-stream"
            })
          });
          const text = await res.text();
          let json;
          try{ json = JSON.parse(text); }
          catch{ return reject("Sunucu JSON d√∂nmedi."); }
          if(json.status!=="ok") return reject(json.message || "Drive'a kaydedilemedi.");
          resolve();
        }catch(e){
          reject(e?.message || "Y√ºkleme hatasƒ±");
        }
      };
      reader.onerror = ()=>reject("Dosya okunamadƒ±.");
      reader.readAsDataURL(file);
    });
  }
</script>
</body>
</html>
